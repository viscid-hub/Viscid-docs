
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Indexing Fields &#8212; Viscid 1.0.0.dev11 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial/index.html" />
    <link rel="prev" title="Philosophy" href="philosophy.html" />
<link rel="icon" href="_static/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="_static/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon-precomposed" href="_static/Vicon_128.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="stylesheet" href="_static/my-css.css" type="text/css" />

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Viscid</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0.0.dev11</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
    <li class="dropdown">
      <a role="button"
         id="dLabelNavLinxToc"
         data-toggle="dropdown"
         data-target="#"
         href="#">Tutorial <b class="caret"></b></a>
      <ul class="dropdown-menu navlinktoc"
          role="menu">
          <li class="toctree-l1">
            <a class="reference internal", href="installation.html">Installation</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/load_save.html">Loading & Saving</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/creating_fields.html">Creating Fields</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/slicing.html">Slicing Fields</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/plotting_scalars.html">Plotting Scalars</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/plotting_vectors.html">Plotting Vectors</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/mayavi.html">3D Plots (Mayavi)</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/openggcm.html">OpenGGCM Specific</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/ionosphere.html">Ionosphere</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/stream_and_interp.html">Streamline and Interpolation</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/magnetic_topology.html">Magnetic Topology</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/magnetopause.html">Magnetopause</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/quasi_potential.html">Quasi Potential</a>
          </li>
      </ul>
    </li>

            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="philosophy.html">Philosophy</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Indexing Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Useful Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_options.html">Plot Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips_and_tricks.html">Tips &amp; Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_behavior.html">Custom Behavior (rc file)</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpl_style_gallery.html">Matplotlib Style Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_readers.html">Extending Readers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/viscid.html">API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changes.html">ChangeLog</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Indexing Fields</a><ul>
<li><a class="reference internal" href="#slice-by-index">Slice-by-index</a></li>
<li><a class="reference internal" href="#slice-by-location">Slice-by-location</a></li>
<li><a class="reference internal" href="#slice-by-mask">Slice-by-mask</a></li>
<li><a class="reference internal" href="#named-slices">Named slices</a></li>
<li><a class="reference internal" href="#vector-component-slices">Vector component slices</a></li>
<li><a class="reference internal" href="#datetime64-timedelta64-slices">Datetime64 / timedelta64 slices</a></li>
<li><a class="reference internal" href="#newaxis">Newaxis</a></li>
<li><a class="reference internal" href="#ellipsis">Ellipsis</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="indexing-fields">
<h1>Indexing Fields<a class="headerlink" href="#indexing-fields" title="Permalink to this headline">¶</a></h1>
<p>The syntax and semantics for indexing are almost equivalent to Numpy’s
basic indexing. The key difference is Viscid supports slice-by-location
(see below). Also, Viscid supports indexing by arrays (like Numpy’s
advanced indexing), but these arrays must be one-dimensional.
Unfortunately, true advanced indexing is poorly defined when the result has
to be on a grid.</p>
<p>Indexing by a single index (or location) reduces that dimension from the
result. Use <code class="xref py py-func docutils literal notranslate"><span class="pre">viscid.Field.slice_and_keep()</span></code> to keep singly
selected dimensions.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If not all slices are named, then all slices must be in the same
order as <code class="docutils literal notranslate"><span class="pre">fld.crds.axes</span></code>, otherwise index ordering would be poorly
defined.</p>
</div>
<div class="section" id="slice-by-index">
<h2>Slice-by-index<a class="headerlink" href="#slice-by-index" title="Permalink to this headline">¶</a></h2>
<p>This syntax works exactly like in Numpy</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld[0]</span></code> access the 0th element</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[:-1]</span></code> everything but the last element</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[2:6:2]</span></code> every other element from 2 to 6</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[:5,</span> <span class="pre">:5]</span></code> first five elements in x and y</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[[0,</span> <span class="pre">5,</span> <span class="pre">7]]</span></code> the 0th, 5th, and 7th elments</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="slice-by-location">
<h2>Slice-by-location<a class="headerlink" href="#slice-by-location" title="Permalink to this headline">¶</a></h2>
<p>Locations on the grid can be specified using imaginary numbers. The
semantics are such that the stop value is included if it matches
a point on the grid. This is different from most python indexing, but
it makes slice-by-location feel more natural.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld[1.0j]</span></code> access element closest to x = 1.0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[:0.0j]</span></code> all elements where x &lt;= 0.0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[0.0j::2]</span></code> every other element where x &gt;= 0.0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[0.0j:,</span> <span class="pre">0.0j:]</span></code> region x &gt;= 0 and y &gt;= 0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[[-1j,</span> <span class="pre">0j,</span> <span class="pre">1j]]</span></code> elements closest to x = [-1, 0, 1]</li>
</ul>
</div></blockquote>
<p>Note that these slices don’t necessarily take the closest grid points.
Rather, they specify a white-list region. Take the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">slc</span> <span class="o">=</span> <span class="n">viscid</span><span class="o">.</span><span class="n">std_sel2index</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">s_</span><span class="p">[</span><span class="o">-</span><span class="mf">0.49</span><span class="n">j</span><span class="p">:</span><span class="mf">0.5</span><span class="n">j</span><span class="p">],</span> <span class="n">arr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arr</span><span class="p">[</span><span class="n">slc</span><span class="p">]</span>
<span class="go">array([0.0, 0.5])</span>
</pre></div>
</div>
</div>
<div class="section" id="slice-by-mask">
<h2>Slice-by-mask<a class="headerlink" href="#slice-by-mask" title="Permalink to this headline">¶</a></h2>
<p>Slices can be a mask, just like in Numpy,</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld[[True,</span> <span class="pre">False,</span> <span class="pre">True]]</span></code> 0th and 2nd elements</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="named-slices">
<h2>Named slices<a class="headerlink" href="#named-slices" title="Permalink to this headline">¶</a></h2>
<p>Slices can be encoded as strings to be explicit about which axis should
be indexed.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld['y</span> <span class="pre">=</span> <span class="pre">0j']</span></code> select the y = 0.0 plane</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['x</span> <span class="pre">=</span> <span class="pre">0j',</span> <span class="pre">'y</span> <span class="pre">=</span> <span class="pre">0j']</span></code> select the x = y = 0.0 plane</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['x</span> <span class="pre">=</span> <span class="pre">0j,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">0j']</span></code> select the x = y = 0.0 plane</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="vector-component-slices">
<h2>Vector component slices<a class="headerlink" href="#vector-component-slices" title="Permalink to this headline">¶</a></h2>
<p>Vector components must be extracted by name. Anything that is not a
vector name is assumed to be a spatial slice. The reason for this is
that it is unambiguous. Also, the user does not have to care about the
data layout (array-of-struct, struct-of-array).</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld['x']</span></code> extracts the x-component from a vector field</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['x,</span> <span class="pre">y</span> <span class="pre">=</span> <span class="pre">0j']</span></code> x-component, y = 0.0 plane</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['y</span> <span class="pre">=</span> <span class="pre">0j',</span> <span class="pre">'x']</span></code> x-component, y = 0.0 plane</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['x',</span> <span class="pre">0j:,</span> <span class="pre">0j]</span></code> x-component, y = 0.0 plane, x &gt;= 0.0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[0j:,</span> <span class="pre">0j,</span> <span class="pre">'x']</span></code> x-component, y = 0.0 plane, x &gt;= 0.0</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="datetime64-timedelta64-slices">
<h2>Datetime64 / timedelta64 slices<a class="headerlink" href="#datetime64-timedelta64-slices" title="Permalink to this headline">¶</a></h2>
<p>Slice-by-location does work with datetime64 / timedelta64 axes. The slices
can be specifed as normal python slices of strings or numpy datetime64
(or timedelta64) objects; or, the slice can be given as a string that looks
like <code class="docutils literal notranslate"><span class="pre">fld[&quot;start:stop&quot;]</span></code>. If you give the whole slice as a string, then
times must be preceeded by either “T” or “UT”, otherwise the string would
be ambiguous.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">viscid</span><span class="o">.</span><span class="n">linspace_datetime64</span><span class="p">(</span><span class="s1">&#39;2010-01-01T12:00:00&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                               <span class="s1">&#39;2010-01-01T15:00:00&#39;</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span> <span class="o">=</span> <span class="n">viscid</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="n">t</span><span class="p">,</span> <span class="n">x</span><span class="p">],</span> <span class="n">crd_names</span><span class="o">=</span><span class="s1">&#39;tx&#39;</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="s1">&#39;node&#39;</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="p">[:</span><span class="s1">&#39;2010-01-01T13:30:00&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 12)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="p">[</span><span class="s1">&#39;2010-01-01T12:30:00&#39;</span><span class="p">:</span><span class="s1">&#39;2010-01-01T13:30:00&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 12)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="p">[</span><span class="s1">&#39;:UT2010-01-01T13:30:00&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 12)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="p">[</span><span class="s1">&#39;UT2010-01-01T12:30:00:UT2010-01-01T13:30:00&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 12)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="p">[:</span><span class="s1">&#39;01:30:00&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 12)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fld</span><span class="p">[</span><span class="s1">&#39;:T01:30:00&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(4, 12)</span>
</pre></div>
</div>
</div>
<div class="section" id="newaxis">
<h2>Newaxis<a class="headerlink" href="#newaxis" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld[numpy.newaxis]</span></code> new axis in dimension 0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['u</span> <span class="pre">=</span> <span class="pre">newaxis']</span></code> new axis in dimension 0 named ‘u’</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[:,</span> <span class="pre">numpy.newaxis]</span></code> new axis in dimension 1</li>
<li><code class="docutils literal notranslate"><span class="pre">fld['y=:',</span> <span class="pre">numpy.newaxis]</span></code> new axis after the y-axis</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[...,</span> <span class="pre">numpy.newaxis]</span></code> new axis in the last dimension</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="ellipsis">
<h2>Ellipsis<a class="headerlink" href="#ellipsis" title="Permalink to this headline">¶</a></h2>
<p>The ellipsis can be used in the standard way, but it can not be used
with named axes. The exception to this is that the ellipsis can be used
with named newaxes.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">fld[0j:,</span> <span class="pre">...,</span> <span class="pre">0j:]</span></code> select x &gt;= 0.0 and z &gt;= 0.0</li>
<li><code class="docutils literal notranslate"><span class="pre">fld[...,</span> <span class="pre">'u</span> <span class="pre">=</span> <span class="pre">newaxis']</span></code> new axis in the last dimension named u</li>
</ul>
</div></blockquote>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/indexing.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2018, Kristofor Maynard.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>