
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Installation &#8212; Viscid 0.99.7.dev0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Philosophy" href="philosophy.html" />
    <link rel="prev" title="Changes" href="changes.html" />
<link rel="icon" href="_static/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="_static/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon-precomposed" href="_static/Vicon_128.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Viscid</a>
        <span class="navbar-text navbar-version pull-left"><b>0.99.7.dev0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
    <li class="dropdown">
      <a role="button"
         id="dLabelNavLinxToc"
         data-toggle="dropdown"
         data-target="#"
         href="#">Tutorial <b class="caret"></b></a>
      <ul class="dropdown-menu navlinktoc"
          role="menu">
          <li class="toctree-l1">
            <a class="reference internal", href="#">Installation</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/creating_fields.html">Creating Fields</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/slicing.html">Slicing Fields</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/plotting_scalars.html">Plotting Scalars</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/plotting_vectors.html">Plotting Vectors</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/mayavi.html">3D Plots (Mayavi)</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/openggcm.html">OpenGGCM Specific</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/ionosphere.html">Ionosphere</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/stream_and_interp.html">Streamline and Interpolation</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/magnetic_topology.html">Magnetic Topology</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/magnetopause.html">Magnetopause</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal", href="tutorial/quasi_potential.html">Quasi Potential</a>
          </li>
      </ul>
    </li>

            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="changes.html">ChangeLog</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="philosophy.html">Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips_and_tricks.html">Tips &amp; Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Useful Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_options.html">Plot Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpl_style_gallery.html">Matplotlib Style Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_behavior.html">Custom Behavior (rc file)</a></li>
<li class="toctree-l1"><a class="reference internal" href="dev_guide.html">Developer’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending_readers.html">Extending Readers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/viscid.html">API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#installing-anaconda-optional-but-recommended">Installing Anaconda (optional but recommended)</a></li>
<li><a class="reference internal" href="#installing-viscid">Installing Viscid</a><ul>
<li><a class="reference internal" href="#choice-1-anaconda">Choice 1: Anaconda</a></li>
<li><a class="reference internal" href="#choice-2-pypi-pip">Choice 2: PyPI (pip)</a></li>
<li><a class="reference internal" href="#choice-3-source">Choice 3: Source</a><ul>
<li><a class="reference internal" href="#choice-3a-installed">Choice 3a: installed</a></li>
<li><a class="reference internal" href="#choice-3b-inplace">Choice 3b: inplace</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#verify-installation">Verify Installation</a></li>
<li><a class="reference internal" href="#known-workarounds">Known Workarounds</a><ul>
<li><a class="reference internal" href="#ubuntu">Ubuntu</a></li>
<li><a class="reference internal" href="#os-x">OS X</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<style type="text/css">
img {
    padding-top: 10pt;
    padding-bottom: 12pt;
}
</style><div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Required<ul>
<li>Python 2.7+ or 3.3+</li>
<li>Python 2.6 and argparse</li>
<li>Numpy &gt;= 1.9</li>
</ul>
</li>
<li>Highly Recommended<ul>
<li>IPython (better interactive interpreter)</li>
<li>Matplotlib &gt;= 1.4 (if you want to make 2d plots using viscid.plot.vpyplot)</li>
<li>Scipy (gives Viscid special powers)</li>
<li>Numexpr (for faster math on large grids)</li>
<li>H5py (enables hdf5 reader)</li>
</ul>
</li>
<li>Truly Optional<ul>
<li>Seaborn</li>
<li>Mayavi2 (if you want to make 3d plots using viscid.plot.vlab)</li>
<li>PyYaml (rc file and plot options can parse using yaml)</li>
</ul>
</li>
<li>Optional for developers<ul>
<li>Cython &gt; 0.17 (if you change pyx / pxd files)</li>
<li>Sphinx</li>
<li>sphinx_rtd_theme</li>
<li>sphinxcontrib-napoleon (if Sphinx is &lt;= version 1.2)</li>
</ul>
</li>
</ul>
<p>The optional calculator modules (necalc and cycalc) are all dispatched through
calculator.calc, and it gracefully falls back to numpy implementations if more advanced libraries are not installed.</p>
</div>
<div class="section" id="installing-anaconda-optional-but-recommended">
<h2>Installing Anaconda (optional but recommended)<a class="headerlink" href="#installing-anaconda-optional-but-recommended" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="https://www.anaconda.com/distribution/">Anaconda Python Distribution</a> makes managing dependencies and virtual environments wicked straight forward (and almost pleasant). You can download the full distribution, but it’s laden with packages you probably don’t need. Also, since <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> is so easy to use, I recommend the lightweight miniconda:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  wget -O miniconda.sh https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
<span class="k">elif</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="k">$(</span>uname -s<span class="k">)</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  curl -o miniconda.sh https://repo.anaconda.com/miniconda/Miniconda3-latest-MacOSX-x86_64.sh
<span class="k">fi</span>
bash miniconda.sh -b -p <span class="nv">$HOME</span>/local/anaconda
rm miniconda.sh
<span class="nb">source</span> ~/.bashrc
<span class="nb">hash</span> -r
conda config --set changeps1 no
conda update -q conda
</pre></div>
</div>
</div>
<div class="section" id="installing-viscid">
<h2>Installing Viscid<a class="headerlink" href="#installing-viscid" title="Permalink to this headline">¶</a></h2>
<p>You have a few choices for installing Viscid. Here is a quick breakdown of why you might choose one method over the another,</p>
<ul class="simple">
<li><a class="reference external" href="http://anaconda.org">Anaconda</a><ul>
<li><strong>+</strong>  Install with a single command</li>
<li><strong>+</strong>  No compiler needed</li>
<li><strong>+</strong>  Available for macOS, Linux, and Windows</li>
<li><strong>+</strong>  Automatically installs dependancies</li>
<li><strong>-</strong>  Lacks jrrle file support</li>
</ul>
</li>
<li>PyPI (pip)<ul>
<li><strong>+</strong>  Install with a single command</li>
<li><strong>+</strong>  No compiler needed for pure python functionality</li>
<li><strong>-</strong>  Recommended dependancies must be installed by hand</li>
<li><strong>-</strong>  Requires a C compiler for interpolation and streamline functions</li>
<li><strong>-</strong>  Requires a Fortran compiler for jrrle file support</li>
</ul>
</li>
<li>Source<ul>
<li><strong>+</strong>  Most flexable</li>
<li><strong>+</strong>  Only way to use a development version</li>
<li><strong>-</strong>  Requires a few commands and some knowledge about PATH and PYTHONPATH (but don’t let this scare you, it’s fairly straight forward)</li>
<li><strong>-</strong>  Recommended dependancies must be installed by hand</li>
<li><strong>-</strong>  Requires a C compiler for interpolation and streamline functions</li>
<li><strong>-</strong>  Requires a Fortran compiler for jrrle file support</li>
</ul>
</li>
</ul>
<div class="section" id="choice-1-anaconda">
<h3>Choice 1: <a class="reference external" href="http://anaconda.org">Anaconda</a><a class="headerlink" href="#choice-1-anaconda" title="Permalink to this headline">¶</a></h3>
<a class="reference external image-reference" href="https://anaconda.org/viscid-hub/viscid"><img alt="Anaconda Version" src="https://anaconda.org/viscid-hub/viscid/badges/version.svg" /></a>
<a class="reference external image-reference" href="https://anaconda.org/viscid-hub/viscid"><img alt="Anaconda Platforms" src="https://anaconda.org/viscid-hub/viscid/badges/platforms.svg" /></a>
<p>If you have Anaconda, then installing Viscid and all the recommended dependancies happens with one command,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda install -c viscid-hub viscid
</pre></div>
</div>
<p>You can check that the install succeeded by running,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m viscid --check
</pre></div>
</div>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">The binaries unloaded to anaconda lack support for reading jrrle files. If you need this, you will need to install from source (using pip or otherwise) and have a Fortran compiler.</p>
</div>
</div>
<div class="section" id="choice-2-pypi-pip">
<h3>Choice 2: PyPI (pip)<a class="headerlink" href="#choice-2-pypi-pip" title="Permalink to this headline">¶</a></h3>
<a class="reference external image-reference" href="https://pypi.org/project/Viscid/"><img alt="PyPI" src="https://img.shields.io/pypi/v/Viscid.svg" /></a>
<p>You can install from source using pip with a single command, but the functionality depends on what compilers are available. Most of Viscid is pure python, but interpolation and streamline calculation requires a C compiler, and the jrrle reader requires a Fortran compiler. Also, Viscid only lists Numpy as a dependancy in pip so that installation will succeed on even the most bare-bones systems. This means you will want to install any of the recommended / optional dependancies yourself.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install viscid
</pre></div>
</div>
<p>Compile errors will not cause Viscid’s pip install to fail, and pip hides warning messages unless you use the <code class="docutils literal notranslate"><span class="pre">-v</span></code> flag. To check the functionality of your install, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m viscid --check
</pre></div>
</div>
</div>
<div class="section" id="choice-3-source">
<h3>Choice 3: Source<a class="headerlink" href="#choice-3-source" title="Permalink to this headline">¶</a></h3>
<p>First, you’ll have to clone the Viscit git repository. This should be done in whatever directory you want to store the Viscid source code. I use <code class="docutils literal notranslate"><span class="pre">~/src</span></code> myself.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/viscid-hub/Viscid.git
mkdir -p ~/.config/matplotlib
cp Viscid/resources/viscidrc ~/.viscidrc
</pre></div>
</div>
<p>If you are using Anaconda to manage your dependencies, you can use the default Viscid environment to automatically install all Viscid’s dependencies,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda env create -f Viscid/resources/viscid27.yml
<span class="c1"># for the more adventurous, you can try python 3.5</span>
conda env create -f Viscid/resources/viscid35mayavi.yml
</pre></div>
</div>
<p>Note that in order to use Viscid, you will need to activate the virtual environment that we just created (this needs to be done for each new terminal session),</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> activate viscid27  <span class="c1"># or viscid35mayavi, etc.</span>
</pre></div>
</div>
<p>An alternative to activating this environment for each session is to prepend PATH in your profile with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">profile</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.bashrc&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;export PATH=~/local/anaconda/envs/viscid27:&quot;</span><span class="s1">&#39;${PATH}&#39;</span> &gt;&gt; <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
<span class="nb">echo</span> <span class="s1">&#39;export CONDA_DEFAULT_ENV=&quot;$(basename &quot;$(cd &quot;$(dirname &quot;$(which python)&quot;)/..&quot;; pwd)&quot;)&quot;&#39;</span> &gt;&gt; <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
<span class="nb">echo</span> <span class="s1">&#39;export CONDA_PREFIX=&quot;$(cd &quot;$(dirname &quot;$(which python)&quot;)/..&quot;; pwd)&quot;&#39;</span> &gt;&gt; <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
<span class="nb">source</span> <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
</pre></div>
</div>
<p>Now you have two choices about how you want to use Viscid. If you intend to edit viscid then I recommend using it inplace. Otherwise, it probably makes more sense to simply install viscid into your python distribution.</p>
<div class="section" id="choice-3a-installed">
<h4>Choice 3a: installed<a class="headerlink" href="#choice-3a-installed" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> Viscid
python setup.py install
<span class="c1"># the above line is synonymous with `make install`</span>

<span class="c1"># or, if you don&#39;t have write permission, try</span>
<span class="c1"># python setup.py install --user</span>
</pre></div>
</div>
<p>To see if the install succeeded, try</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># kick the tires</span>
python -m viscid --check
<span class="c1"># run the full test suite</span>
make instcheck
</pre></div>
</div>
<p>To pull updates from github in the future, use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git pull
python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="choice-3b-inplace">
<h4>Choice 3b: inplace<a class="headerlink" href="#choice-3b-inplace" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> Viscid
python setup.py build_ext -i
<span class="c1"># the above line is synonymous with `make inplace`</span>

<span class="c1"># To set environment variables in Bash</span>
<span class="nv">profile</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">/.bashrc&quot;</span>
<span class="nb">echo</span> <span class="s1">&#39;export PATH=&quot;${PATH}:&#39;</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span><span class="s2">/scripts\&quot;&quot;</span> &gt;&gt; <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
<span class="nb">echo</span> <span class="s1">&#39;export PYTHONPATH=&quot;${PYTHONPATH}:&#39;</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span><span class="s2">\&quot;&quot;</span> &gt;&gt; <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
<span class="nb">source</span> <span class="si">${</span><span class="nv">profile</span><span class="si">}</span>
</pre></div>
</div>
<p>To see if the bulid succeeded, try</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># kick the tires</span>
python -m viscid --check
<span class="c1"># run the full test suite</span>
make check
</pre></div>
</div>
<p>To pull updates from github in the future, use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git pull
python setup.py build_ext -i
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="verify-installation">
<h2>Verify Installation<a class="headerlink" href="#verify-installation" title="Permalink to this headline">¶</a></h2>
<p>You can always run the following to check for any installation warnings. It is most helpful when verifying whether or not the C / Fortran modules compiled successfully.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python -m viscid --check
</pre></div>
</div>
</div>
<div class="section" id="known-workarounds">
<h2>Known Workarounds<a class="headerlink" href="#known-workarounds" title="Permalink to this headline">¶</a></h2>
<div class="section" id="ubuntu">
<h3>Ubuntu<a class="headerlink" href="#ubuntu" title="Permalink to this headline">¶</a></h3>
<p>All Linux workarounds are currently incorporated in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.</p>
</div>
<div class="section" id="os-x">
<h3>OS X<a class="headerlink" href="#os-x" title="Permalink to this headline">¶</a></h3>
<p>If you get an abort trap that says <code class="docutils literal notranslate"><span class="pre">PyThreadState_Get:</span> <span class="pre">no</span> <span class="pre">current</span> <span class="pre">thread</span></code> when trying to use mayavi, then this is probably yet another anaconda packaging issue. The solution is to roll back to a different sub-release of python. running this did the trick for me: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">python=3.5.3</span> <span class="pre">pyqt=4</span></code>.</p>
<p>If you see a link error that says <cite>-lgcc_s.10.5</cite> can’t be found, try running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">su</span> <span class="n">root</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;mkdir -p /usr/local/lib &amp;&amp; ln -s /usr/lib/libSystem.B.dylib /usr/local/lib/libgcc_s.10.5.dylib&quot;</span>
</pre></div>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/installation.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2018, Kristofor Maynard.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>